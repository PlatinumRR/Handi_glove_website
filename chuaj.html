<!DOCTYPE HTML>
<!--
	Hielo by TEMPLATED
	templated.co @templatedco
	Released for free under the Creative Commons Attribution 3.0 license (templated.co/license)
-->
<html>
	<head>
		<title>Jia-En's Report</title>
		<base href="https://engineering.purdue.edu/477grp7/" />
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="subpage">

		<!-- Header -->
			<header id="header">
				<div class="logo"><a href="index.html">Handi_glove <span>by Team07</span></a></div>
				<a href="#menu">Menu</a>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="index.html">Home</a></li>
					<li><a href="team.html">Team</a></li>
					<li><a href="documents.html">Documents</a></li>
					<li><a href="https://github.com/PlatinumRR/Handi_glove">Source</a></li>
					<li><a href="media.html">Media</a></li>
					<li><a href="ece477.html">ECE477</a></li>
				</ul>
			</nav>

		<!-- One -->
			<section id="One" class="wrapper style3">
				<div class="inner">
					<header class="align-center">
						<p>Jia En Chua</p>
						<h2>Progress Report</h2>
					</header>
				</div>
			</section>

		<!-- Two -->
			<section id="two" class="wrapper style2">
				<div class="inner">
					<!--Latest first please-->
					<!--That is one report-->
					<div class="box">
						<div class="content">
							<header class="align-center">
								
								<h2>Week Two Report</h2>
							</header>
							<p>My team and I brainstormed about how we should place the Peltier Cooler and airbag inside of the glove and how do we handle the case when the heat generated by Peltier Module expands the air inside of the airbag which is supposed act as a touch module. We decided to place two modules together. I suggested that we can program to check if airbag expands and heat is generated at the same time, then we adjust the syringe to account for the air expansion by heat. Also, I researched about the time period Peltier Cooler will take to provide cooling effect.</p>
						</div>
					</div>
					<!--Report ends here-->
					<div class="box">
						<div class="content">
							<header class="align-center">
								
								<h2>Week Three Report</h2>
							</header>
							<p>This week I have done some research about picking the right microcontroller for our project. I looked over the difference between MSP430 and STM32 family line. After several discussion and consideration, we decided to go with one of the STM32 microcontroller because the number of modules it provides fit our needs. The other team members also have more experience in using STM32 line of microcontroller because of previous classes or personal projects they have previously completed.</p>
							<img src="jiaen_img/stm32datasheet.png" height="150" width="800">
							<img src="jiaen_img/msp430datasheet.png" height="150" width="800">
							<p>In order to complete the software overview, I have also looked into my previous project in ECE 362 to refresh on my embedded C code. I did some research about the structure of communication packets that are going to be transmitting between microcontrollers. </p>
							<p>Besides, I created a flow chart for software architecture. The logic flow becomes much clearer after laying the flow chart. I believe that it also benefits the reader to understand better about how the code works. Other than that, I have created state diagram to describe each state of the overall system. This will also come in handy when we actually started coding. Lastly, my team and I started testing each module we currently possess to make sure each and every one is working correctly. We tested the time taken and power needed for Peltier Cooler to generate temperature difference. We also make sure that linear actuator, servo, and robotic hand work.</p>
							<img src="jiaen_img/ref_code.png" height="400" width="500">
						</div>
					</div>			
					<div class="box">
						<div class="content">
							<header class="align-center">
								<h2>Week Four Report</h2>
							</header>
							<p>This week our team set up the environment for STM32L4 microcontroller. We tested using GPIO to toggle two LEDs on the board. However we are going to use STM32L1 for our project instead because STM32L1 provides more ADC pins that we needed to control each robotic fingers. Although the microcontroller we are testing right now is different with what we are going to use for the project, STM32 line of microcontrollers will have similar structure of program, thus we do not have to worry about familiarize ourselves with new set of programming tools. The challenging part will be figuring out the desire pin for different purposes and working out proper value for each module. This is also a huge portion of my time spent this week to get the microcontroller working. Besides, we spend a good amount of time to pick the best suited electronic parts(voltage regulator for servo, voltage regulator for cooler) for our project. Next, we are going to try generating temperature using Peltier Cooler via sensor input from temperature sensor. Then we will try adjusting the motor speed through PWM. I look forward to many challenging tasks next week.</p>
							<img src="jiaen_img/voltage_regulator_digikey.png" height="200" width="800">
							<img src="jiaen_img/gpioToggle.jpg" height="400" width="500">
							<img src="jiaen_img/gpiocode.png" height="400" width="500">
						</div>
					</div>		
					<div class="box">
						<div class="content">
							<header class="align-center">
								<h2>Week Five Report</h2>
							</header>
							<p>This week I created 3D modelling of the robotic hand. To get the precision of each hole for bolt to go through, I measure the robotic hand by measuring tape and create the CAD model with scale. I have also created a program to verify the movement of robotic fingers. Firstly, I learned about the software to program arduino. Then made the connection for specific pin, power and ground. Then I use the Arduino Library to control the fingersâ€™ movement via potentiometer. Eventually, the code works but somehow there is still glitch when the finger moves. Then we received help from TA to debug this issue. We found out this can be fixed by inserting a capacitor into our circuitry. Next week, we can try to implement PWM on STM32L1 to control the Linear Actuator or Peltier Cooler.</p>
							<img src="jiaen_img/measure.jpg" height="400" width="300">
							<img src="jiaen_img/measure2.jpg" height="400" width="300">
							<img src="jiaen_img/cadrobothand.png" height="400" width="300">
						</div>
					</div>	
					<div class="box">
						<div class="content">
							<header class="align-center">
								<h2>Week Six Report</h2>
							</header>
							<p>This week I got STM32L152RC to work with blinking LED. I have attached the code below which utilizes GPIO_Toggle function to turn LED on and off. I am currently working on ADC which will be utilized to receive input from temperature sensors. Most of the time this week is spent on setting up the environment to start coding and getting myself familiarize with stm32 embedded software structure. Therefore there is fewer picture or graph to showcase the effort. However, significant amount of time and effort is required to write the program. Next week I will try getting sensor value in via ADC and output heat through PWM.</p>
							<img src="jiaen_img/GPIOToggleCode.jpg" height="400" width="300">
						</div>
					</div>	
					<div class="box">
						<div class="content">
							<header class="align-center">
								<h2>Week Seven Report</h2>
							</header>
							<p>This week I managed to get ADC and PWM to work. I learned to set up configuration for modules like ADC and TIM. Firstly, I verify that the program receives analog input from a potentiometer and turn that into digital signal through ADC. I set up the connection and verified by using the oscilloscope. I have included pictures below to showcased the changes of ADC value in debugger. Then I change the wiring connection to test if temperature sensor work. After some minor tweaking, I made it to work.</p>
							<img src="jiaen_img/adcvalue1.jpg" height="400" width="300">
							<img src="jiaen_img/adcvalue2.jpg" height="400" width="300">
							<p>After getting ADC to work, I move on to PWM. I first study PWM's configuration and ways to enable the correct timer channel. Then I found out the function to update the pwm duty cycle. I insert the function into two single for loops to test the brightness of LED. I successfully made the LED to alternate between glowing and turning off. I also verify the waveform through oscilloscope which will be proved by pictures below.</p>
							<img src="jiaen_img/ledon.jpg" height="400" width="300">
							<img src="jiaen_img/ledoff.jpg" height="400" width="300">
							<p>Once I get the PWM to work, I discuss with Yaodong about how to control servo through PWM. Yaodong introduced a H-bridge circuitry for me to test PWM on servo. Then we successfully control the servo's movement. We also tweak some values like clock period, duty cycle and delay period to smoothen the motion. Code and result will be shown below.</p>
							<img src="jiaen_img/servo1.jpg" height="400" width="300">
							<img src="jiaen_img/servo2.jpg" height="400" width="300">
							<img src="jiaen_img/pwmwaveform.jpg" height="400" width="300">
							<img src="jiaen_img/pwmadccode.jpg" height="400" width="300">
						</div>
					</div>
					<div class="box">
						<div class="content">
							<header class="align-center">
								<h2>Week Nine Report</h2>
							</header>
							<p>This week I managed to read multiple ADC channels and set pwm using interrupts so that all servos can move simultaneously. I also managed to get linear actuator to move by figuring out the difference between two voltage inputs. I can easily code the part for linear actuator by using PWM. However we do not have enough PWM channel. Therefore I will use logic and GPIO Output mode to set the high time of linear actuator input voltage.</p>
							<img src="jiaen_img/twoServos.gif">
							<br>
							<img src="jiaen_img/twoServos.jpg" height="400" width="300">
							<img src="jiaen_img/twoServos2.jpg" height="400" width="300">
							<p>Below is a table that show the configuration of two inputs to manipulate linear actuator's movement. I have experimented with linear actuator's motor driver and found out that its trigger voltage is around 0.85V. Our choice of STM32 provides around 3.3V of voltage and thus there will be enough power to drive the linear actuator. Next I will need to solve the problem about the heat affection on air bag from Peltier module. Before that I will make sure that the hardware for pressure feedback system works correctly.</p>
							<img src="jiaen_img/la.jpg" height="400" width="300">
						</div>
					</div>
					<div class="box">
						<div class="content">
							<header class="align-center">
								<h2>Week Ten Report</h2>
							</header>
							<p>This week I work on pressure feedback system. The system works by pressing touch sensor to control linear actuator so that the syringe get push to increase air expansion inside of airbag. I first verify the correctness of ADC value from touch sensor and I calculate a converted value to control the linear actuator. Linear actuator works by setting 1 and 0 on two inputs. It will only extend or shrink if two inputs are different. Then it will need to extend/shrink for a period of time according to the pressure value.</p>
							<img src="jiaen_img/pressure_la.gif">
							<br>
							<img src="jiaen_img/LAcode.jpg" height="400" width="300">
							<p>Then I work with Yao Chen to implement UART. We utilized ADC interrupt to read in a potentiometer value and transmit it to the slave. Then the slave will constantly read from master using interrupt. We verified that the communication works by reading a specific ADC value from master to slave. Next I will make sure the communication works both way. Then I will start putting all features together and see if there is any delay.</p>
						</div>
					</div>
				</div>
			</section>

		<!-- Footer -->
			<footer id="footer">
				<div class="copyright">
					All rights reserved.
				<div class="copyright">
					Fall 2018 ECE 477 Team 07
				<div class="copyright">
					Website designed basing on Hielo by TEMPLATE, modified by Yaodong Shen
				</div>
			</footer>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>